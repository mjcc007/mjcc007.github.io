{"version":3,"file":"static/js/50.43bb919c.chunk.js","mappings":"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","sources":["components/id-selec.tsx","components/userSelect.tsx","components/drag-and-drop.tsx","utils/task-type.ts","assets/task.svg","assets/bug.svg","screens/kanban/create-task.tsx","components/mark.tsx","screens/kanban/kaban-column.tsx","screens/kanban/create-kanban.tsx","components/task-type-select.tsx","screens/kanban/search-panel.tsx","screens/kanban/task-modal.tsx","screens/kanban/index.tsx","screens/kanban/util.ts","utils/kanban.ts","utils/project.ts","utils/task.ts","utils/url.ts","utils/reorder.ts","utils/use-optimistic-options.ts"],"sourcesContent":["import { Select } from \"antd\";\nimport React from \"react\";\nimport { Raw } from \"types\";\n\ntype SelectProps = React.ComponentProps<typeof Select>;\n\ninterface IdSelectProps\n  extends Omit<SelectProps, \"value\" | \"onChange\" | \"options\"> {\n  value?: Raw | null | undefined;\n  onChange?: (value?: number) => void;\n  defaultOptName?: string;\n  options?: { name: string; id: number }[];\n}\n\nexport function IdSelect(props: IdSelectProps) {\n  const { value, onChange, defaultOptName, options, ...restProps } = props;\n\n  const toNumber = (value: unknown) =>\n    isNaN(Number(value)) ? 0 : Number(value);\n\n  return (\n    <Select\n      value={toNumber(value)}\n      onChange={(value) => onChange?.(toNumber(value) || undefined)}\n      {...restProps}\n    >\n      {defaultOptName ? (\n        <Select.Option value={0}>{defaultOptName}</Select.Option>\n      ) : null}\n      {options?.map((option) => (\n        <Select.Option value={option.id} key={option.id}>\n          {\" \"}\n          {option.name}\n        </Select.Option>\n      ))}\n    </Select>\n  );\n}\n","import React, { useState } from \"react\";\nimport { useDoMount } from \"utils\";\nimport { useHttp } from \"utils/http\";\nimport { IdSelect } from \"./id-selec\";\n\nexport const UserSelect = (props: React.ComponentProps<typeof IdSelect>) => {\n  const [users, setUsers] = useState([]);\n  const client = useHttp();\n  useDoMount(() => {\n    client(\"users\").then(setUsers);\n    // eslint-disable-next-line  react-hooks/exhaustive-deps\n  });\n  return <IdSelect options={users || []} {...props} />;\n};\n","import React, { ReactNode } from \"react\";\nimport {\n  Draggable,\n  DraggableProps,\n  Droppable,\n  DroppableProps,\n  DroppableProvided,\n  DroppableProvidedProps,\n} from \"react-beautiful-dnd\";\n\ntype DropProps = Omit<DroppableProps, \"children\"> & { children: ReactNode };\nexport const Drop = ({ children, ...props }: DropProps) => {\n  return (\n    <Droppable {...props}>\n      {(provided) => {\n        if (React.isValidElement(children)) {\n          return React.cloneElement(children, {\n            ...provided.droppableProps,\n            ref: provided.innerRef,\n            provided,\n          } as any);\n        }\n        return <div />;\n      }}\n    </Droppable>\n  );\n};\n\ntype DropChildProps = Partial<\n  { provided: DroppableProvided } & DroppableProvidedProps\n> &\n  React.HTMLAttributes<HTMLDivElement>;\nexport const DropChild = React.forwardRef<HTMLDivElement, DropChildProps>(\n  ({ children, ...props }, ref) => (\n    <div ref={ref} {...props}>\n      {children}\n      {props.provided?.placeholder}\n    </div>\n  )\n);\n\ntype DragProps = Omit<DraggableProps, \"children\"> & { children: ReactNode };\nexport const Drag = ({ children, ...props }: DragProps) => {\n  return (\n    <Draggable {...props}>\n      {(provided) => {\n        if (React.isValidElement(children)) {\n          //\n          return React.cloneElement(children, {\n            ...provided.draggableProps,\n            ...provided.dragHandleProps,\n            ref: provided.innerRef,\n          } as any);\n        }\n        return <div />;\n      }}\n    </Draggable>\n  );\n};\n","import { useQuery } from \"react-query\";\nimport { TaskType } from \"types\";\nimport { useHttp } from \"./http\";\n\nconst TASK_TYPE_KEY = \"tasktype\";\nexport const useTaskTypes = () => {\n  const client = useHttp();\n  // 第二个参数，param改变 触发重新请求\n  return useQuery<TaskType[]>([TASK_TYPE_KEY], () => client(\"taskTypes\"));\n};\n","var _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTask(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    t: 1667791127123,\n    className: \"icon\",\n    viewBox: \"0 0 1024 1024\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"p-id\": 3441,\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 20,\n    height: 20,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M273.408 207.36h492.032c38.912 0 70.144 31.232 70.144 70.144v492.032c0 38.912-31.232 70.144-70.144 70.144H273.408c-38.912 0-70.144-31.232-70.144-70.144V277.504c0-38.912 31.232-70.144 70.144-70.144z\",\n    fill: \"#CAE4FF\",\n    \"p-id\": 3442\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M160.768 127.488c-16.896-1.024-31.744 11.776-32.768 29.184v725.504c-1.024 16.896 11.776 31.744 29.184 32.768h725.504c16.896 1.024 31.744-11.776 32.768-29.184V160.256c1.024-16.896-11.776-31.744-29.184-32.768h-3.584-721.92z m0-65.536h721.92c53.76 1.536 97.28 44.544 98.304 98.304v721.92c-1.536 53.76-44.544 97.28-98.304 98.304h-721.92c-53.76-1.536-97.28-44.544-98.304-98.304v-721.92c1.024-53.76 44.544-96.768 98.304-98.304z m393.728 262.656h196.608c16.896-1.024 31.744 11.776 32.768 29.184v3.584c1.024 16.896-11.776 31.744-29.184 32.768h-200.192c-16.896 1.024-31.744-11.776-32.768-29.184v-3.584c-1.024-16.896 11.776-31.744 29.184-32.768h3.584z m-197.12 393.728c17.92 0 32.768-14.848 32.768-32.768 0-17.92-14.848-32.768-32.768-32.768-17.92 0-32.768 14.848-32.768 32.768 0 17.92 14.848 32.768 32.768 32.768z m0 65.536c-54.272 0-98.304-44.032-98.304-98.304s44.032-98.304 98.304-98.304S455.68 631.296 455.68 685.568s-43.52 98.304-98.304 98.304z m-6.144-400.384L279.04 311.296c-13.312-12.288-33.792-11.776-46.08 1.536-11.776 12.288-11.776 31.744 0 44.544l91.648 91.648c7.168 6.656 16.384 11.264 26.112 13.312 9.216 1.024 18.432-1.536 26.112-6.656l137.728-137.728c12.8-12.8 12.8-33.28 0-46.08s-33.28-12.8-46.08 0L351.232 383.488z m203.264 268.8h196.608c17.92 0 32.768 14.848 32.768 32.768 0 17.92-14.848 32.768-32.768 32.768h-196.608c-17.92 0-32.768-14.848-32.768-32.768 0-17.92 14.848-32.768 32.768-32.768z\",\n    fill: \"#0972E7\",\n    \"p-id\": 3443\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTask);\nexport default __webpack_public_path__ + \"static/media/task.1614c33af71e0361d45add352937d5c5.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2, _path3;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgBug(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    t: 1667791289393,\n    className: \"icon\",\n    viewBox: \"0 0 1024 1024\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"p-id\": 19013,\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 20,\n    height: 20,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M81.92 1003.52c-33.87392 0-61.44-27.56608-61.44-61.44V81.92c0-33.87392 27.56608-61.44 61.44-61.44h860.16c33.87392 0 61.44 27.56608 61.44 61.44v860.16c0 33.87392-27.56608 61.44-61.44 61.44H81.92z\",\n    fill: \"#FF5D48\",\n    \"p-id\": 19014\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M942.08 40.96c22.58944 0 40.96 18.37056 40.96 40.96v860.16c0 22.58944-18.37056 40.96-40.96 40.96H81.92c-22.58944 0-40.96-18.37056-40.96-40.96V81.92c0-22.58944 18.37056-40.96 40.96-40.96h860.16m0-40.96H81.92a81.92 81.92 0 0 0-81.92 81.92v860.16a81.92 81.92 0 0 0 81.92 81.92h860.16a81.92 81.92 0 0 0 81.92-81.92V81.92a81.92 81.92 0 0 0-81.92-81.92z\",\n    fill: \"#EC4D38\",\n    \"p-id\": 19015\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M743.15776 317.58336c4.56704 4.56704 6.84032 10.17856 6.84032 16.85504 0 6.67648-2.27328 12.288-6.84032 16.85504l-58.9824 58.9824c30.02368 30.02368 49.60256 61.35808 58.73664 94.02368l109.83424 0.26624c6.67648 0 12.288 2.27328 16.85504 6.84032 4.56704 4.56704 6.84032 10.17856 6.84032 16.85504 0.16384 6.49216-2.10944 12.10368-6.8608 16.85504a22.2208 22.2208 0 0 1-16.85504 6.8608l-104.0384 0.26624c0 1.76128-0.18432 4.21888-0.53248 7.3728s-1.536 9.35936-3.56352 18.57536c-2.00704 9.216-4.52608 18.1248-7.49568 26.7264a172.2368 172.2368 0 0 1-13.96736 29.24544 140.98432 140.98432 0 0 1-22.1184 28.95872L465.05984 427.15136l-33.71008 33.71008 235.97056 235.97056c-8.94976 8.94976-19.0464 16.67072-30.28992 23.16288a153.1904 153.1904 0 0 1-31.60064 14.2336c-9.8304 2.99008-19.0464 5.36576-27.648 7.10656-8.6016 1.76128-15.27808 2.72384-20.00896 2.90816l-7.63904 0.26624 6.32832 102.7072c0.16384 7.18848-2.19136 13.25056-7.10656 18.16576a24.22784 24.22784 0 0 1-15.54432 7.10656 23.87968 23.87968 0 0 1-17.12128-6.30784 23.63392 23.63392 0 0 1-8.15104-16.32256l-6.57408-112.96768c-30.208-9.8304-59.35104-28.79488-87.4496-56.89344l-58.9824 58.9824a22.89664 22.89664 0 0 1-16.85504 6.84032c-6.67648 0-12.288-2.27328-16.85504-6.84032a22.89664 22.89664 0 0 1-6.84032-16.85504c0-6.67648 2.29376-12.288 6.84032-16.85504l58.9824-58.9824-77.43488-77.43488h-91.11552c-6.67648 0-12.288-2.27328-16.85504-6.84032a22.89664 22.89664 0 0 1-6.84032-16.85504c0-6.67648 2.27328-12.288 6.84032-16.85504 4.56704-4.56704 10.17856-6.84032 16.85504-6.84032h91.11552l222.28992-222.28992v-91.11552c0-6.67648 2.27328-12.288 6.84032-16.85504 4.54656-4.608 10.15808-6.88128 16.83456-6.88128 6.67648 0 12.288 2.27328 16.85504 6.84032 4.56704 4.56704 6.84032 10.17856 6.84032 16.85504v91.11552l77.43488 77.43488 58.9824-58.9824c4.56704-4.56704 10.17856-6.84032 16.85504-6.84032 6.67648-0.02048 12.288 2.27328 16.85504 6.84032z m-278.09792-25.2928l-168.5504 168.5504c-23.3472-23.3472-35.0208-51.44576-35.0208-84.2752 0-32.82944 11.6736-60.928 35.0208-84.2752s51.44576-35.04128 84.2752-35.0208c32.82944 0 60.90752 11.6736 84.2752 35.0208z\",\n    fill: \"#FFFFFF\",\n    \"p-id\": 19016\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgBug);\nexport default __webpack_public_path__ + \"static/media/bug.9b8093065b6b0237b8c6df3459fff89b.svg\";\nexport { ForwardRef as ReactComponent };","import { Card, Input } from \"antd\";\nimport React, { useEffect, useState } from \"react\";\nimport { useAddTask } from \"utils/task\";\nimport { useProjecIdInUrl, useTasksQueryKey } from \"./util\";\n\nexport const CreateTask = ({ kanbanId }: { kanbanId: number }) => {\n  const [name, setName] = useState(\"\");\n  const { mutateAsync: addTask } = useAddTask(useTasksQueryKey());\n  const projectId = useProjecIdInUrl();\n  const [inputMode, setInputModel] = useState(false);\n\n  const submit = async () => {\n    await addTask({ projectId, name, kanbanId });\n    setInputModel(false);\n    setName(\"\");\n  };\n  const toggle = () => setInputModel((mode) => !mode);\n\n  useEffect(() => {\n    if (!inputMode) {\n      setName(\"\");\n    }\n  }, [inputMode]);\n\n  if (!inputMode) {\n    return <div onClick={toggle}>+创建事务</div>;\n  }\n  return (\n    <Card>\n      <Input\n        onBlur={toggle}\n        placeholder={\"需要做什么？\"}\n        autoFocus={true}\n        onPressEnter={submit}\n        value={name}\n        onChange={(e) => setName(e.target.value)}\n      />\n    </Card>\n  );\n};\n","import React from \"react\";\n\nexport const Mark = ({ name, keyword }: { name: string; keyword: string }) => {\n  if (!keyword) {\n    return <>{name}</>;\n  }\n  const arr = name.split(keyword);\n  return (\n    <>\n      {arr.map((str, index) => (\n        <span key={index}>\n          {str}\n          {index === arr.length - 1 ? null : (\n            <span style={{ color: \"#257AFD\" }}>{keyword}</span>\n          )}\n        </span>\n      ))}\n    </>\n  );\n};\n","import React from \"react\";\nimport { Kanban, Task } from \"types\";\nimport { useTasks } from \"utils/task\";\nimport { useTaskTypes } from \"utils/task-type\";\nimport { useKanbansQueryKey, useTaskModal, useTaskSearcnParams } from \"./util\";\nimport taskIcon from \"assets/task.svg\";\nimport bugIcon from \"assets/bug.svg\";\nimport styled from \"@emotion/styled\";\nimport { Button, Card, Modal } from \"antd\";\nimport { CreateTask } from \"./create-task\";\nimport { Mark } from \"components/mark\";\nimport { Row } from \"components/lib\";\nimport { DeleteOutlined } from \"@ant-design/icons\";\nimport { useDelKanban } from \"utils/kanban\";\nimport { Drag, Drop, DropChild } from \"components/drag-and-drop\";\n\nconst TaskTypeIcon = ({ id }: { id: number }) => {\n  const { data: taskTypes } = useTaskTypes();\n  const name = taskTypes?.find((type) => type.id === id)?.name;\n  if (!name) return null;\n  return <img alt=\"task-icon\" src={name === \"task\" ? taskIcon : bugIcon} />;\n};\n\nconst TaskCard = ({ task }: { task: Task }) => {\n  const { startEdit } = useTaskModal();\n  const { name: keyword } = useTaskSearcnParams();\n  return (\n    <Card\n      style={{ marginBottom: `0.5rem`, cursor: \"pointer\" }}\n      key={task.id}\n      onClick={() => startEdit(task.id)}\n    >\n      <p>\n        <Mark name={task.name} keyword={keyword} />\n      </p>\n      <TaskTypeIcon id={task.typeId} />\n    </Card>\n  );\n};\n\nexport const KanbanColumn = React.forwardRef<\n  HTMLDivElement,\n  { kanban: Kanban }\n>(({ kanban, ...props }, ref) => {\n  const { data: allTask } = useTasks(useTaskSearcnParams());\n  const tasks = allTask?.filter((task) => task.kanbanId === kanban.id);\n  const { mutateAsync: del } = useDelKanban(useKanbansQueryKey());\n\n  const startDelete = () => {\n    Modal.confirm({\n      okText: \"确定\",\n      cancelText: \"取消\",\n      title: \"确定删除看板吗\",\n      onOk() {\n        return del({ id: kanban.id });\n      },\n    });\n  };\n\n  return (\n    <Container ref={ref} {...props}>\n      <Row between>\n        <h3>{kanban.name}</h3>\n        <Button\n          type=\"primary\"\n          shape=\"circle\"\n          icon={<DeleteOutlined />}\n          danger\n          onClick={startDelete}\n        />\n      </Row>\n\n      <TaskConatiner>\n        <Drop\n          type={\"ROW\"}\n          direction={\"vertical\"}\n          droppableId={String(kanban.id)}\n        >\n          <DropChild style={{ minHeight: \"5px\" }}>\n            {tasks?.map((task, index) => (\n              <Drag key={task.id} index={index} draggableId={\"task\" + task.id}>\n                <div>\n                  <TaskCard key={task.id} task={task} />\n                </div>\n              </Drag>\n            ))}\n          </DropChild>\n        </Drop>\n        <CreateTask kanbanId={kanban.id} />\n      </TaskConatiner>\n    </Container>\n  );\n});\n\nexport const Container = styled.div`\n  min-width: 27rem;\n  border-radius: 6px;\n  background-color: rgb(245, 244, 247);\n  display: flex;\n  flex-direction: column;\n  padding: 0.7rem 0.7rem 1rem;\n  margin-right: 1.5rem;\n`;\n\nconst TaskConatiner = styled.div`\n  overflow: scroll;\n  flex: 1;\n\n  ::-webkit-scrollbar {\n    display: none;\n  }\n`;\n","import { Input } from \"antd\";\nimport React, { useState } from \"react\";\nimport { useAddKanban } from \"utils/kanban\";\nimport { Container } from \"./kaban-column\";\nimport { useKanbansQueryKey, useProjecIdInUrl } from \"./util\";\n\nexport const CreateKanban = () => {\n  const [name, setName] = useState(\"\");\n  const projectId = useProjecIdInUrl();\n\n  const { mutateAsync: addKanban } = useAddKanban(useKanbansQueryKey());\n  const submit = async () => {\n    await addKanban({ name, projectId });\n    setName(\"\");\n  };\n\n  return (\n    <Container>\n      <Input\n        size={\"large\"}\n        placeholder={\"新建看板名称\"}\n        onPressEnter={submit}\n        value={name}\n        onChange={(e) => setName(e.target.value)}\n      />\n    </Container>\n  );\n};\n","import React from \"react\";\nimport { useTaskTypes } from \"utils/task-type\";\nimport { IdSelect } from \"./id-selec\";\n\nexport const TaskTypeSelect = (\n  props: React.ComponentProps<typeof IdSelect>\n) => {\n  const { data: types } = useTaskTypes();\n\n  return <IdSelect options={types || []} {...props} />;\n};\n","import { Button, Input } from \"antd\";\nimport { Row } from \"components/lib\";\nimport { TaskTypeSelect } from \"components/task-type-select\";\nimport { UserSelect } from \"components/userSelect\";\nimport { useSetUrlSearchParam } from \"utils/url\";\nimport { useTaskSearcnParams } from \"./util\";\n\nexport const SearchPanel = () => {\n  const serachParams = useTaskSearcnParams();\n  const setSearchParams = useSetUrlSearchParam();\n\n  const reset = () => {\n    setSearchParams({\n      typeId: undefined,\n      processorId: undefined,\n      tagId: undefined,\n      name: undefined,\n    });\n  };\n\n  return (\n    <Row marginBottom={4} gap={true}>\n      <Input\n        style={{ width: `20rem` }}\n        placeholder={\"任务名\"}\n        value={serachParams.name}\n        onChange={(evt) => setSearchParams({ name: evt.target.value })}\n      />\n      <UserSelect\n        defaultOptName={\"经办人\"}\n        value={serachParams.processorId}\n        onChange={(val) => setSearchParams({ processorId: val })}\n      />\n      <TaskTypeSelect\n        defaultOptName={\"类型\"}\n        value={serachParams.typeId}\n        onChange={(val) => setSearchParams({ typeId: val })}\n      />\n      <Button onClick={reset}>重置</Button>\n    </Row>\n  );\n};\n","import { DeleteOutlined } from \"@ant-design/icons\";\nimport { Button, Form, Input, Modal } from \"antd\";\nimport { useForm } from \"antd/es/form/Form\";\nimport { TaskTypeSelect } from \"components/task-type-select\";\nimport { UserSelect } from \"components/userSelect\";\nimport React, { useEffect } from \"react\";\nimport { useDelTask, useEditTask } from \"utils/task\";\nimport { useTaskModal, useTasksQueryKey } from \"./util\";\n\nconst layout = {\n  labelCol: { span: 8 },\n  wrapperCol: { span: 16 },\n};\n\nexport const TaskModal = () => {\n  const [form] = useForm();\n  const { editingTaskId, task, close, isLoading } = useTaskModal();\n  const { mutateAsync: edit } = useEditTask(useTasksQueryKey());\n  const { mutate: deleteTask } = useDelTask(useTasksQueryKey());\n\n  const onCancle = () => {\n    close();\n    form.resetFields();\n  };\n\n  const onOk = async () => {\n    await edit({ ...task, ...form.getFieldsValue() });\n    close();\n  };\n\n  useEffect(() => {\n    form.setFieldsValue(task);\n  }, [form, task]);\n\n  const startDelete = () => {\n    close();\n    Modal.confirm({\n      okText: \"确定\",\n      cancelText: \"取消\",\n      title: \"确定删除任务吗\",\n      onOk() {\n        return deleteTask({ id: Number(editingTaskId) });\n      },\n    });\n  };\n\n  return (\n    <Modal\n      okText={\"确认\"}\n      cancelText={\"取消\"}\n      forceRender={true}\n      confirmLoading={isLoading}\n      title={\"编辑任务\"}\n      open={!!editingTaskId}\n      onCancel={onCancle}\n      onOk={onOk}\n    >\n      <Form {...layout} initialValues={task} form={form}>\n        <Form.Item\n          label={\"任务名\"}\n          name={\"name\"}\n          rules={[{ required: true, message: \"请输入任务\" }]}\n        >\n          <Input />\n        </Form.Item>\n        <Form.Item label={\"经办人\"} name={\"processorId\"}>\n          <UserSelect />\n        </Form.Item>\n        <Form.Item label={\"类型\"} name={\"typeId\"}>\n          <TaskTypeSelect />\n        </Form.Item>\n      </Form>\n      <div style={{ textAlign: \"right\" }}>\n        <Button\n          type=\"primary\"\n          shape=\"circle\"\n          style={{ fontSize: \"14px\" }}\n          size={\"small\"}\n          icon={<DeleteOutlined />}\n          danger\n          onClick={startDelete}\n        />\n      </div>\n    </Modal>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport { Spin } from \"antd\";\nimport { Drag, Drop, DropChild } from \"components/drag-and-drop\";\nimport { ScreenContainer } from \"components/lib\";\nimport React, { useCallback } from \"react\";\nimport { DragDropContext, DropResult } from \"react-beautiful-dnd\";\nimport { useKanbans, useReorderKanban } from \"utils/kanban\";\nimport { useReorderTasks, useTasks } from \"utils/task\";\nimport { CreateKanban } from \"./create-kanban\";\nimport { KanbanColumn } from \"./kaban-column\";\nimport { SearchPanel } from \"./search-panel\";\nimport { TaskModal } from \"./task-modal\";\nimport {\n  useKanbanSearcnParams,\n  useKanbansQueryKey,\n  useProjectInUrl,\n  useTaskSearcnParams,\n  useTasksQueryKey,\n} from \"./util\";\n\nexport default function KanbanScreen() {\n  const { data: curProject } = useProjectInUrl();\n  const { data: kanbans, isLoading: kanbanLoading } = useKanbans(\n    useKanbanSearcnParams()\n  );\n  const { isLoading: taskLoading } = useTasks(useTaskSearcnParams());\n  const loading = taskLoading || kanbanLoading;\n\n  const dragEnd = useDragEnd();\n\n  return (\n    <DragDropContext onDragEnd={dragEnd}>\n      <ScreenContainer>\n        <h3>{curProject?.name} 看板</h3>\n        <SearchPanel />\n        {loading ? (\n          <Spin size={\"large\"} />\n        ) : (\n          <ColumnsContainer>\n            <Drop\n              type={\"COLUMN\"}\n              direction={\"horizontal\"}\n              droppableId={\"kanban\"}\n            >\n              <DropChild style={{ display: \"flex\" }}>\n                {kanbans?.map((item, index) => (\n                  <Drag\n                    key={item.id}\n                    draggableId={\"kanban\" + item.id}\n                    index={index}\n                  >\n                    <KanbanColumn kanban={item} key={item.id}></KanbanColumn>\n                  </Drag>\n                ))}\n              </DropChild>\n            </Drop>\n            <CreateKanban />\n          </ColumnsContainer>\n        )}\n        <TaskModal />\n      </ScreenContainer>\n    </DragDropContext>\n  );\n}\n\nexport const useDragEnd = () => {\n  const { data: kanbans } = useKanbans(useKanbanSearcnParams());\n  const { mutate: reorderKanban } = useReorderKanban(useKanbansQueryKey());\n  const { mutate: reorderTask } = useReorderTasks(useTasksQueryKey());\n  const { data: allTasks = [] } = useTasks(useTaskSearcnParams());\n\n  return useCallback(\n    ({ source, destination, type }: DropResult) => {\n      if (!destination) return;\n      // 看板排序\n      if (type === \"COLUMN\") {\n        const fromId = kanbans?.[source.index].id;\n        const toId = kanbans?.[destination.index].id;\n        if (!fromId || !toId || fromId === toId) return;\n\n        const type = destination.index > source.index ? \"after\" : \"before\";\n\n        reorderKanban({ fromId, referenceId: toId, type });\n      } else {\n        const fromKanbanId = +source.droppableId;\n        const toKanbanId = +destination.droppableId;\n        const fromTask = allTasks.filter(\n          (task) => task.kanbanId === fromKanbanId\n        )[source.index];\n\n        const toTask = allTasks.filter((task) => task.kanbanId === toKanbanId)[\n          destination.index\n        ];\n\n        if (fromTask?.id === toTask?.id) return;\n\n        reorderTask({\n          fromId: fromTask?.id,\n          referenceId: toTask?.id,\n          fromKanbanId,\n          toKanbanId,\n          type:\n            fromKanbanId === toKanbanId && destination.index > source.index\n              ? \"after\"\n              : \"before\",\n        });\n      }\n    },\n    [kanbans, reorderKanban, allTasks, reorderTask]\n  );\n};\n\nexport const ColumnsContainer = styled.div`\n  display: flex;\n  overflow-x: scroll;\n  margin-right: 2rem;\n  flex: 1;\n`;\n","import { TASK_KEY, useTaskDetail } from \"./../../utils/task\";\nimport { KANBAN_KEY } from \"./../../utils/kanban\";\nimport { useProjectDetail } from \"./../../utils/project\";\nimport { useLocation } from \"react-router\";\nimport { useUrlQueryParam } from \"utils/url\";\nimport { useCallback, useMemo } from \"react\";\n\nexport const useProjecIdInUrl = () => {\n  const { pathname } = useLocation();\n  const id = pathname.match(/project\\/(\\d+)/)?.[1];\n  return Number(id);\n};\n\nexport const useProjectInUrl = () => useProjectDetail(useProjecIdInUrl());\n\nexport const useKanbanSearcnParams = () => ({\n  projectId: useProjecIdInUrl(),\n});\nexport const useKanbansQueryKey = () => [KANBAN_KEY, useKanbanSearcnParams()];\n\nexport const useTaskSearcnParams = () => {\n  const [param] = useUrlQueryParam([\"name\", \"typeId\", \"processorId\", \"tagId\"]);\n  const projectId = useProjecIdInUrl();\n  return useMemo(\n    () => ({\n      projectId,\n      typeId: Number(param.typeId) || undefined,\n      processorId: Number(param.processorId) || undefined,\n      tagId: Number(param.tagId) || undefined,\n      name: param.name,\n    }),\n    [projectId, param]\n  );\n};\nexport const useTasksQueryKey = () => [TASK_KEY, useTaskSearcnParams()];\n\nexport const useTaskModal = () => {\n  const [{ editingTaskId }, setEditingTaskId] = useUrlQueryParam([\n    \"editingTaskId\",\n  ]);\n\n  const { data: task, isLoading } = useTaskDetail(Number(editingTaskId));\n\n  const startEdit = useCallback(\n    (id: number) => {\n      setEditingTaskId({ editingTaskId: id });\n    },\n    [setEditingTaskId]\n  );\n\n  const close = useCallback(() => {\n    setEditingTaskId({ editingTaskId: \"\" });\n  }, [setEditingTaskId]);\n\n  return {\n    editingTaskId,\n    task,\n    startEdit,\n    close,\n    isLoading,\n  };\n};\n","import { QueryKey, useMutation, useQuery } from \"react-query\";\nimport { Kanban } from \"./../types/index\";\nimport { useHttp } from \"./http\";\nimport {\n  useAddConfig,\n  useDeleteConfig,\n  useReorderConfig,\n  useReorderKanbanConfig,\n} from \"./use-optimistic-options\";\nexport const KANBAN_KEY = \"=KANBANS\";\n\nexport const useKanbans = (params?: Partial<Kanban>) => {\n  const client = useHttp();\n  // 第二个参数，param改变 触发重新请求\n  return useQuery<Kanban[]>([KANBAN_KEY, params], () =>\n    client(\"kanbans\", { data: params })\n  );\n};\n\nexport const useAddKanban = (queryKey: QueryKey) => {\n  const client = useHttp();\n\n  return useMutation(\n    (params: Partial<Kanban>) =>\n      client(`kanbans`, {\n        data: params,\n        method: \"POST\",\n      }),\n    useAddConfig(queryKey)\n  );\n};\n\nexport const useDelKanban = (queryKey: QueryKey) => {\n  const client = useHttp();\n\n  return useMutation(\n    ({ id }: { id: number }) => client(`kanbans/${id}`, { method: \"DELETE\" }),\n    useDeleteConfig(queryKey)\n  );\n};\n\nexport interface SortProps {\n  fromId: number;\n  referenceId: number;\n  type: \"before\" | \"after\";\n  fromKanbanId?: number;\n  toKanbanId?: number;\n}\nexport const useReorderKanban = (queryKey: QueryKey) => {\n  const client = useHttp();\n  return useMutation((params: SortProps) => {\n    return client(\"kanbans/reorder\", {\n      data: params,\n      method: \"POST\",\n    });\n  }, useReorderKanbanConfig(queryKey));\n};\n","import { useHttp } from \"./http/index\";\nimport { QueryKey, useMutation, useQuery } from \"react-query\";\nimport {\n  useAddConfig,\n  useDeleteConfig,\n  useEditConfig,\n} from \"./use-optimistic-options\";\nimport { Project } from \"types\";\nexport const PROJECT_KEY = \"PROJECTS\";\n\nexport const useProjects = (params?: Partial<Project>) => {\n  const client = useHttp();\n  // 第二个参数，param改变 触发重新请求\n  return useQuery<Project[]>([PROJECT_KEY, params], () =>\n    client(\"projects\", { data: params })\n  );\n};\n\nexport const useEditProject = (queryKey: QueryKey) => {\n  const client = useHttp();\n\n  return useMutation(\n    (params: Partial<Project>) =>\n      client(`projects/${params.id}`, { method: \"PATCH\", data: params }),\n    useEditConfig(queryKey)\n  );\n};\n\nexport const useAddProject = (queryKey: QueryKey) => {\n  const client = useHttp();\n\n  return useMutation(\n    (params: Partial<Project>) =>\n      client(`projects`, {\n        data: params,\n        method: \"POST\",\n      }),\n    useAddConfig(queryKey)\n  );\n};\n\nexport const useDelProject = (queryKey: QueryKey) => {\n  const client = useHttp();\n\n  return useMutation(\n    ({ id }: { id: number }) => client(`projects/${id}`, { method: \"DELETE\" }),\n    useDeleteConfig(queryKey)\n  );\n};\n\nexport const useProjectDetail = (id?: number) => {\n  const client = useHttp();\n  return useQuery<Project>(\n    [\"project\", { id }],\n    () => client(`projects/${id}`),\n    { enabled: Boolean(id) }\n  );\n};\n","import { Task } from \"./../types/index\";\nimport { QueryKey, useMutation, useQuery } from \"react-query\";\nimport { useHttp } from \"./http\";\nimport {\n  useAddConfig,\n  useDeleteConfig,\n  useEditConfig,\n  useReorderTaskConfig,\n} from \"./use-optimistic-options\";\nimport { useDebounce } from \"utils\";\nimport { SortProps } from \"./kanban\";\nexport const TASK_KEY = \"=TANSKS\";\n\nexport const useTasks = (params?: Partial<Task>) => {\n  const client = useHttp();\n  const debouncedParam = { ...params, name: useDebounce(params?.name, 200) };\n  // 第二个参数，param改变 触发重新请求\n  return useQuery<Task[]>([TASK_KEY, debouncedParam], () =>\n    client(\"tasks\", { data: debouncedParam })\n  );\n};\n\nexport const useAddTask = (queryKey: QueryKey) => {\n  const client = useHttp();\n\n  return useMutation(\n    (params: Partial<Task>) =>\n      client(`tasks`, {\n        data: params,\n        method: \"POST\",\n      }),\n    useAddConfig(queryKey)\n  );\n};\n\nexport const useDelTask = (queryKey: QueryKey) => {\n  const client = useHttp();\n\n  return useMutation(\n    ({ id }: { id: number }) => client(`tasks/${id}`, { method: \"DELETE\" }),\n    useDeleteConfig(queryKey)\n  );\n};\n\nexport const useEditTask = (queryKey: QueryKey) => {\n  const client = useHttp();\n\n  return useMutation(\n    (params: Partial<Task>) =>\n      client(`projects/${params.id}`, { method: \"PATCH\", data: params }),\n    useEditConfig(queryKey)\n  );\n};\n\nexport const useTaskDetail = (id?: number) => {\n  const client = useHttp();\n  return useQuery<Task>([\"task\", { id }], () => client(`tasks/${id}`), {\n    enabled: Boolean(id),\n  });\n};\n\nexport const useReorderTasks = (queryKey: QueryKey) => {\n  const client = useHttp();\n  return useMutation((params: SortProps) => {\n    return client(\"tasks/reorder\", {\n      data: params,\n      method: \"POST\",\n    });\n  }, useReorderTaskConfig(queryKey));\n};\n","import { cleanObject } from \"./index\";\nimport { useMemo } from \"react\";\nimport { URLSearchParamsInit, useSearchParams } from \"react-router-dom\";\n\nexport const useUrlQueryParam = <K extends string>(keys: K[]) => {\n  const [searchParams] = useSearchParams();\n  const setSearchParams = useSetUrlSearchParam();\n  return [\n    useMemo(\n      () =>\n        keys.reduce((prev, key) => {\n          return { ...prev, [key]: searchParams.get(key) || \"\" };\n        }, {} as { [key in K]: string }),\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      [searchParams]\n    ),\n    (params: Partial<{ [key in K]: unknown }>) => {\n      setSearchParams(params);\n    },\n  ] as const;\n};\n\nexport const useSetUrlSearchParam = () => {\n  const [searchParams, setSearchParam] = useSearchParams();\n  return (params: { [key in string]: unknown }) => {\n    const o = cleanObject({\n      ...Object.fromEntries(searchParams),\n      ...params,\n    }) as URLSearchParamsInit;\n    return setSearchParam(o);\n  };\n};\n","/**\n * 在本地对排序进行乐观更新\n * @param fromId 要排序的项目的id\n * @param type 'before' | 'after'\n * @param referenceId 参照id\n * @param list 要排序的列表, 比如tasks, kanbans\n */\nexport const reorder = ({\n  fromId,\n  type,\n  referenceId,\n  list,\n}: {\n  list: { id: number }[];\n  fromId: number;\n  type: \"after\" | \"before\";\n  referenceId: number;\n}) => {\n  const copiedList = [...list];\n  // 找到fromId对应项目的下标\n  const movingItemIndex = copiedList.findIndex((item) => item.id === fromId);\n  if (!referenceId) {\n    return insertAfter([...copiedList], movingItemIndex, copiedList.length - 1);\n  }\n  const targetIndex = copiedList.findIndex((item) => item.id === referenceId);\n  const insert = type === \"after\" ? insertAfter : insertBefore;\n  return insert([...copiedList], movingItemIndex, targetIndex);\n};\n\n/**\n * 在list中，把from放在to的前边\n * @param list\n * @param from\n * @param to\n */\nconst insertBefore = (list: unknown[], from: number, to: number) => {\n  const toItem = list[to];\n  const removedItem = list.splice(from, 1)[0];\n  const toIndex = list.indexOf(toItem);\n  list.splice(toIndex, 0, removedItem);\n  return list;\n};\n\n/**\n * 在list中，把from放在to的后面\n * @param list\n * @param from\n * @param to\n */\nconst insertAfter = (list: unknown[], from: number, to: number) => {\n  const toItem = list[to];\n  const removedItem = list.splice(from, 1)[0];\n  const toIndex = list.indexOf(toItem);\n  list.splice(toIndex + 1, 0, removedItem);\n  return list;\n};\n","import { QueryKey, useQueryClient } from \"react-query\";\nimport { Task } from \"types\";\nimport { reorder } from \"./reorder\";\n\nexport const useConfig = (\n  queryKey: QueryKey,\n  callback: (target: any, old?: any[]) => any[]\n) => {\n  const queryClient = useQueryClient();\n  return {\n    onSuccess: () => queryClient.invalidateQueries(queryKey),\n    async onMutate(target: any) {\n      const previousItem = queryClient.getQueryData(queryKey);\n\n      queryClient.setQueryData(queryKey, (old?: any[]) => {\n        return callback(target, old);\n      });\n      return { previousItem };\n    },\n    onError(err: any, newItem: any, context: any) {\n      queryClient.setQueryData(queryKey, context?.previousItem);\n    },\n  };\n};\n\nexport const useDeleteConfig = (queryKey: QueryKey) =>\n  useConfig(\n    queryKey,\n    (target, old) => old?.filter((item) => item.id !== target.id) || []\n  );\n\nexport const useEditConfig = (queryKey: QueryKey) =>\n  useConfig(\n    queryKey,\n    (target, old) =>\n      old?.map((item) =>\n        item.id === target.id ? { ...item, ...target } : item\n      ) || []\n  );\n\nexport const useAddConfig = (queryKey: QueryKey) =>\n  useConfig(queryKey, (target, old) => (old ? [...old, target] : []));\n\nexport const useReorderConfig = (queryKey: QueryKey) =>\n  useConfig(queryKey, (target, old) => old || []);\n\nexport const useReorderKanbanConfig = (queryKey: QueryKey) =>\n  useConfig(queryKey, (target, old) => reorder({ list: old, ...target }));\n\nexport const useReorderTaskConfig = (queryKey: QueryKey) =>\n  useConfig(queryKey, (target, old) => {\n    const orderedList = reorder({ list: old, ...target }) as Task[];\n    return orderedList.map((item) =>\n      item.id === target.fromId\n        ? { ...item, kanbanId: target.toKanbanId }\n        : item\n    );\n  });\n"],"names":["IdSelect","props","value","onChange","defaultOptName","options","restProps","toNumber","isNaN","Number","undefined","map","option","id","name","UserSelect","useState","users","setUsers","client","useHttp","useDoMount","then","Drop","children","provided","React","droppableProps","ref","innerRef","DropChild","placeholder","Drag","draggableProps","dragHandleProps","useTaskTypes","useQuery","CreateTask","kanbanId","setName","addTask","useAddTask","useTasksQueryKey","mutateAsync","projectId","useProjecIdInUrl","inputMode","setInputModel","submit","toggle","mode","useEffect","onBlur","autoFocus","onPressEnter","e","target","onClick","Mark","keyword","arr","split","str","index","length","style","color","TaskTypeIcon","taskTypes","data","find","type","alt","src","taskIcon","bugIcon","TaskCard","task","startEdit","useTaskModal","useTaskSearcnParams","marginBottom","cursor","typeId","KanbanColumn","kanban","allTask","useTasks","tasks","filter","del","useDelKanban","useKanbansQueryKey","Container","between","shape","icon","DeleteOutlined","danger","Modal","okText","cancelText","title","onOk","TaskConatiner","direction","droppableId","String","minHeight","draggableId","styled","CreateKanban","addKanban","useAddKanban","size","TaskTypeSelect","types","SearchPanel","serachParams","setSearchParams","useSetUrlSearchParam","gap","width","evt","processorId","val","tagId","layout","labelCol","span","wrapperCol","TaskModal","useForm","form","editingTaskId","close","isLoading","edit","useEditTask","deleteTask","useDelTask","mutate","getFieldsValue","setFieldsValue","forceRender","confirmLoading","open","onCancel","resetFields","initialValues","label","rules","required","message","textAlign","fontSize","KanbanScreen","curProject","useProjectInUrl","useKanbans","useKanbanSearcnParams","kanbans","kanbanLoading","loading","dragEnd","useDragEnd","onDragEnd","ColumnsContainer","display","item","reorderKanban","useReorderKanban","reorderTask","useReorderTasks","allTasks","useCallback","source","destination","fromId","toId","referenceId","fromKanbanId","toKanbanId","fromTask","toTask","useLocation","pathname","match","useProjectDetail","KANBAN_KEY","useUrlQueryParam","param","useMemo","TASK_KEY","setEditingTaskId","useTaskDetail","params","queryKey","useMutation","method","useAddConfig","useDeleteConfig","useReorderKanbanConfig","PROJECT_KEY","useProjects","useEditProject","useEditConfig","useAddProject","useDelProject","enabled","Boolean","debouncedParam","useDebounce","useReorderTaskConfig","keys","useSearchParams","searchParams","reduce","prev","key","get","setSearchParam","o","cleanObject","Object","fromEntries","reorder","list","copiedList","movingItemIndex","findIndex","insertAfter","targetIndex","insertBefore","from","to","toItem","removedItem","splice","toIndex","indexOf","useConfig","callback","queryClient","useQueryClient","onSuccess","invalidateQueries","onMutate","previousItem","getQueryData","setQueryData","old","onError","err","newItem","context"],"sourceRoot":""}